<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/xlk.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/xlk.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/xlk.png">
  <link rel="mask-icon" href="/images/xkl.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"ypw.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","display":["always"],"padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="杨培文的 blog">
<meta property="og:type" content="website">
<meta property="og:title" content="杨培文">
<meta property="og:url" content="https://ypw.io/page/4/index.html">
<meta property="og:site_name" content="杨培文">
<meta property="og:description" content="杨培文的 blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="杨培文">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://ypw.io/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>杨培文</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111276663-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-111276663-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">杨培文</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Yang Peiwen</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="杨培文"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">杨培文</p>
  <div class="site-description" itemprop="description">杨培文的 blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ypwhs" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ypwhs" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/ypwhs" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;ypwhs" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://www.zhihu.com/people/yangpw" title="知乎 → http:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;yangpw" rel="noopener me" target="_blank"><i class="fa fa-book fa-fw"></i>知乎</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/ypwhs" title="Linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;ypwhs" rel="noopener me" target="_blank"><i class="fa-brands fa-linkedin fa-fw"></i>Linkedin</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">docker常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-11-18 17:04:48" itemprop="dateCreated datePublished" datetime="2015-11-18T17:04:48+08:00">2015-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>创建一个 docker： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:14.04</span><br></pre></td></tr></table></figure> 启动一个docker： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -t -i --cpuset-cpus=0-7 wrtnode-2r-sdk /bin/bash</span><br></pre></td></tr></table></figure>
恢复运行中的docker： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach wrtnode-2r-sdk</span><br></pre></td></tr></table></figure> 保存一个docker： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br><span class="line">docker commit 7d mycaffe</span><br></pre></td></tr></table></figure>
导出一个docker： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br><span class="line">docker export 4bf6cd922cfd &gt; wrtnode-2r-sdk.tar</span><br></pre></td></tr></table></figure> 导入一个docker： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat wrtnode-2r-sdk.tar | docker import - wrtnode-2r-sdk:latest</span><br></pre></td></tr></table></figure>
删除一个docker： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f wrtnode-2r-sdk</span><br></pre></td></tr></table></figure> 修改DNS： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;nameserver 8.8.8.8&quot; &gt; /etc/resolv.conf</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/WRTnode%202R%20%E6%95%91%E7%A0%96%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/WRTnode%202R%20%E6%95%91%E7%A0%96%E6%95%99%E7%A8%8B/" class="post-title-link" itemprop="url">WRTnode 2R 救砖教程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-11-03 16:13:42" itemprop="dateCreated datePublished" datetime="2015-11-03T16:13:42+08:00">2015-11-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>当你修改了网络设置，或者刷了其他型号的固件，或者各种复杂的原因，导致了你无法连接上WRTnode，那么我们就可以认为WRTnode已经变成砖头了。这时候就需要救砖。</p>
<p>可能需要的软件：<a href="/images/tftp.zip">tftp.zip</a>
包括tftpd32，putty，sscom42，openwrt-ramips-mt7628-wrtnode2r-squashfs-sysupgrade.bin（自己编译的WRTnode
2R固件，带中文，有点偏大是因为我之前编译过opencv之类的东西可能有依赖库没有去掉）</p>
<p>首先我们需要一个USB转TTL，通过它我们可以让电脑连上WRTnode的UART接口。这是单片机常用的通讯方式，这里不作详细介绍。接线方式：</p>
<p>WRTndoe ---- USB to TTL TX0 ---- RXD RX0 ---- TXD GND ---- GND</p>
<p><a href="/images/2R-pin-map.jpg"><img
src="/images/2R-pin-map.jpg" /></a></p>
<p>如图所示：</p>
<p><a href="/images/IMG_0674.jpg"><img
src="/images/IMG_0674.jpg" /></a></p>
<p>然后我们还需要连接上网线口，如图所示：</p>
<p><a href="/images/IMG_0675.jpg"><img
src="/images/IMG_0675.jpg" /></a></p>
<p>我们连接网线以后，需要设置静态IP，设置方法如下：</p>
<p><a href="/images/Snip20151103_10.png"><img
src="/images/Snip20151103_10.png" /></a></p>
<p>然后我们打开串口助手，上电，可以看到类似的信息输出：</p>
<p><a href="/images/Snip20151103_5.png"><img
src="/images/Snip20151103_5.png" /></a></p>
<p>很显然内核挂了，我们打开Tftpd32软件，配置如图所示：<a
href="/images/无标题21.png"><img src="/images/无标题21.png" /></a></p>
<p>配置好之后将WRTnode的电断掉再插上，再次重启，然后在出现下面这段话的时候按2，然后按y来配置IP等信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Please choose the operation: </span><br><span class="line"></span><br><span class="line">   1: Load system code to SDRAM via TFTP. </span><br><span class="line"></span><br><span class="line">   2: Load system code then write to Flash via TFTP. </span><br><span class="line"></span><br><span class="line">   3: Boot system code via Flash (default).</span><br><span class="line"></span><br><span class="line">   4: Entr boot command line interface.</span><br><span class="line"></span><br><span class="line">   7: Load Boot Loader code then write to Flash via Serial. </span><br><span class="line"></span><br><span class="line">   9: Load Boot Loader code then write to Flash via TFTP.</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">You choosed 2</span><br><span class="line"></span><br><span class="line">2: System Load Linux Kernel then write to Flash via TFTP. </span><br><span class="line"></span><br><span class="line"> Warning!! Erase Linux in Flash then burn new one. Are you sure?(Y/N)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Please Input new ones /or Ctrl-C to discard</span><br><span class="line"></span><br><span class="line">	Input device IP (192.168.1.1) ==:192.168.1.1</span><br><span class="line"></span><br><span class="line">	Input server IP (192.168.1.100) ==:192.168.1.100</span><br><span class="line"></span><br><span class="line">	Input Linux Kernel filename () ==:test.bin</span><br></pre></td></tr></table></figure>
<p>当你按下回车的那一瞬间，Tftpd32就会开始传输你选择的固件。</p>
<p><a href="/images/无标题.png"><img src="/images/无标题.png" /></a></p>
<p>传输完成之后，WRTnode就会开始进行刷机，这时候注意千万不能断电。</p>
<p><a href="/images/无标题2.png"><img
src="/images/无标题2.png" /></a></p>
<p>最后我们可以看到，WRTnode已经可以正常启动！</p>
<video width=100% src=/images/A-55.mp4 controls />
<p>久违的闪瞎眼的LED！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/Ubuntu-14.04%E4%B8%8B%E5%AE%89%E8%A3%85ffmpeg/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Ubuntu-14.04%E4%B8%8B%E5%AE%89%E8%A3%85ffmpeg/" class="post-title-link" itemprop="url">Ubuntu-14.04下安装ffmpeg</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-30 11:42:27" itemprop="dateCreated datePublished" datetime="2015-10-30T11:42:27+08:00">2015-10-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>方法1：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:mc3man/trusty-media</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get dist-upgrade</span><br><span class="line">sudo apt-get install ffmpeg</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://launchpad.net/~mc3man/+archive/ubuntu/trusty-media">https://launchpad.net/~mc3man/+archive/ubuntu/trusty-media</a></p>
<p>方法2：</p>
<p>自行编译。</p>
<p><a
target="_blank" rel="noopener" href="https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu">https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/%E4%BD%BF%E7%94%A8V4L2%E8%8E%B7%E5%8F%96%E6%91%84%E5%83%8F%E5%A4%B4%E7%9A%84%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E4%BD%BF%E7%94%A8V4L2%E8%8E%B7%E5%8F%96%E6%91%84%E5%83%8F%E5%A4%B4%E7%9A%84%E4%BF%A1%E6%81%AF/" class="post-title-link" itemprop="url">使用V4L2获取摄像头的信息</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-25 23:31:30" itemprop="dateCreated datePublished" datetime="2015-10-25T23:31:30+08:00">2015-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>V4L2全称是Video for Linux 2，通过它可以驱动摄像头。</p>
<p>在Ubuntu中，已经内置了V4L2，因此不需要安装多余的东西。在WRTnode中，如果你需要使用V4L2，需要这样：
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Libraries  ---&gt;    libv4l</span><br></pre></td></tr></table></figure> <a href="/images/Snip20151025_1.png"><img
src="/images/Snip20151025_1.png" /></a></p>
<p>然后直接上代码： <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;fcntl.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;linux/videodev2.h&gt;</span></span><br><span class="line"></span><br><span class="line">char videodevice[] = <span class="string">&quot;/dev/video0&quot;</span>;</span><br><span class="line">void printFrameInterval(int fd, unsigned int <span class="built_in">fmt</span>, unsigned int width, unsigned int height)</span><br><span class="line">&#123;</span><br><span class="line">    struct v4l2_frmivalenum frmival;</span><br><span class="line">    memset(&amp;frmival,0,sizeof(frmival));</span><br><span class="line">    frmival.pixel_format = <span class="built_in">fmt</span>;</span><br><span class="line">    frmival.width = width;</span><br><span class="line">    frmival.height = height;</span><br><span class="line">    <span class="keyword">while</span> (ioctl(fd, VIDIOC_ENUM_FRAMEINTERVALS, &amp;frmival) == 0) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (frmival.type == V4L2_FRMIVAL_TYPE_DISCRETE) </span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;[%dx%d] %f fps\n&quot;</span>, width, height, 1.0*frmival.discrete.denominator/frmival.discrete.numerator);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;[%dx%d] [%f,%f] fps\n&quot;</span>, width, height, 1.0*frmival.stepwise.max.denominator/frmival.stepwise.max.numerator, 1.0*frmival.stepwise.min.denominator/frmival.stepwise.min.numerator);</span><br><span class="line">        frmival.index++;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int <span class="function"><span class="title">main</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	//打开摄像头设备</span><br><span class="line">	int fd = -1;</span><br><span class="line">	fd = open (videodevice, O_RDWR, 0);</span><br><span class="line">	<span class="keyword">if</span>(fd&lt;0)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;failed to open\n&quot;</span>);</span><br><span class="line">		<span class="built_in">return</span> -1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;打开摄像头设备成功，%s\n&quot;</span>, videodevice);</span><br><span class="line"></span><br><span class="line">	//查询摄像头信息，VIDIOC_QUERYCAP</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;------------\n&quot;</span>);</span><br><span class="line">	struct v4l2_capability <span class="built_in">cap</span>;</span><br><span class="line">	ioctl (fd, VIDIOC_QUERYCAP, &amp;<span class="built_in">cap</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Driver Name:%s\nCard Name:%s\nBus info:%s\nDriver Version:%u.%u.%u\n\n&quot;</span>,cap.driver,cap.card,cap.bus_info,(cap.version&gt;&gt;16)&amp;0XFF, (cap.version&gt;&gt;8)&amp;0XFF,cap.version&amp;0XFF);</span><br><span class="line"></span><br><span class="line">	//查询摄像头视频格式，VIDIOC_ENUM_FMT</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;------------\n&quot;</span>);</span><br><span class="line">	struct v4l2_fmtdesc fmtdesc;</span><br><span class="line">	fmtdesc.index=0;</span><br><span class="line">	fmtdesc.type=V4L2_BUF_TYPE_VIDEO_CAPTURE;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Supportformat:\n&quot;</span>);</span><br><span class="line">	<span class="keyword">while</span>(ioctl(fd,VIDIOC_ENUM_FMT,&amp;fmtdesc)!=-1)  </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\t%d.%c%c%c%c\t%s\n&quot;</span>,fmtdesc.index+1,fmtdesc.pixelformat &amp; 0xFF, (fmtdesc.pixelformat &gt;&gt; 8) &amp; 0xFF,(fmtdesc.pixelformat &gt;&gt; 16) &amp; 0xFF, (fmtdesc.pixelformat &gt;&gt; 24) &amp; 0xFF,fmtdesc.description);</span><br><span class="line">		fmtdesc.index++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	v4l2_close(fd);</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc test.c -o <span class="built_in">test</span> -lv4l2</span><br><span class="line">./test</span><br></pre></td></tr></table></figure> <a
href="/images/Snip20151025_2.png"><img
src="/images/Snip20151025_2.png" /></a></p>
<p>这里我获取了三个摄像头的信息。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/WRTnode%202R%20%E5%BC%80%E5%8F%91OpenCV%20C++%E7%A8%8B%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/WRTnode%202R%20%E5%BC%80%E5%8F%91OpenCV%20C++%E7%A8%8B%E5%BA%8F/" class="post-title-link" itemprop="url">WRTnode 2R 开发OpenCV C++程序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-22 18:54:23" itemprop="dateCreated datePublished" datetime="2015-10-22T18:54:23+08:00">2015-10-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>首先当然是下载OpenCV的源码，我这里的OpenCV版本是2.4.11。下载地址：<a
target="_blank" rel="noopener" href="http://opencv.org/downloads.html">http://opencv.org/downloads.html</a>(87.4MB)。</p>
<p>下载好之后解压，然后安装cmake，并打开cmake-gui开始配置交叉编译。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cmake cmake-qt-gui</span><br><span class="line">cmake-gui</span><br></pre></td></tr></table></figure>
<p>选好源码的目录，这里我在桌面上创建了一个目录叫opencv-mipsel，用来存放编译好的文件。</p>
<p><a href="/images/Snip20151020_59.png"><img
src="/images/Snip20151020_59.png" /></a></p>
<p>设置好之后点击Configure。</p>
<p><a href="/images/Snip20151020_60.png"><img
src="/images/Snip20151020_60.png" /></a></p>
<p>选择最后一个选项（交叉编译）。</p>
<p><a href="/images/Snip20151020_62.png"><img
src="/images/Snip20151020_62.png" /></a></p>
<p>在Operating
System填上Linux，然后c和c++编译器选择<code>/home/ypw/Desktop/wrtnode/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/mipsel-openwrt-linux-gcc</code> 这个编译器和```
/home/ypw/Desktop/wrtnode/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/mipsel-openwrt-linux-g++
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Target Root就是```</span><br><span class="line">/home/ypw/Desktop/wrtnode/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin</span><br><span class="line">``` 目录。Finish之后会看到很多选项。</span><br><span class="line"></span><br><span class="line">[![](/images/Snip20151020_63.png)](/images/Snip20151020_63.png)</span><br><span class="line"></span><br><span class="line">首先我们应该去掉**WITH_GTK**，**WITH_FFMPEG**，因为它们无法编译成功。（此处参考[opencv-2.4.4的交叉编译](http://wiki.wrtnode.com/index.php?title=Common_method/zh-cn &quot;Common_method/zh-cn&quot;)，事实上我勾上以后并不会编译GTK和FFMPEG，也就是说能编译成功）</span><br><span class="line"></span><br><span class="line">[![](/images/Snip20151020_66.png)](/images/Snip20151020_66.png)</span><br><span class="line"></span><br><span class="line">然后还有**CMAKE_INSTALL_PREFIX**目录需要设置一下，这里我们选择了```</span><br><span class="line">/usr/local/openwrt</span><br><span class="line">``` 。</span><br><span class="line"></span><br><span class="line">[![](/images/Snip20151020_69.png)](/images/Snip20151020_69.png)</span><br><span class="line"></span><br><span class="line">最后点击Generate，然后进入openwrt-mipsel文件夹，输入make -j8开始编译。</span><br><span class="line"></span><br><span class="line">```sh</span><br><span class="line">cd /home/ypw/Desktop/opencv-mipsel</span><br><span class="line">make -j8</span><br></pre></td></tr></table></figure></p>
<p>编译过程中我出现过<code>virtual memory exhausted: Cannot allocate memory</code>错误，建议将虚拟机内存扩大到4GB以上。</p>
<p>编译过程中会看到各种花花绿绿的信息输出，不出意外的话大概需要编译十分钟。</p>
<p><a href="/images/Snip20151020_70.png"><img
src="/images/Snip20151020_70.png" /></a></p>
<p>完成以后我们就可以安装刚编译好的库了。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151020_71.png"><img
src="/images/Snip20151020_71.png" /></a></p>
<p>除此之外还需要将库和头文件复制到toolchain中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -r /usr/local/openwrt/* /home/ypw/Desktop/wrtnode/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2</span><br></pre></td></tr></table></figure>
<p>然后我们就可以开始写我们的OpenCV程序了。参考<a
target="_blank" rel="noopener" href="http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html">Reading
and Writing Images and Video</a>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;opencv2/core/core.hpp&gt;</span></span><br><span class="line"><span class="comment">#include &lt;opencv2/highgui/highgui.hpp&gt;</span></span><br><span class="line"><span class="comment">#include &lt;cstdio&gt;</span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line"></span><br><span class="line">int <span class="function"><span class="title">main</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    VideoCapture <span class="built_in">cap</span>(0); // open the default camera</span><br><span class="line">    <span class="keyword">if</span>(!cap.isOpened())  // check <span class="keyword">if</span> we succeeded</span><br><span class="line">        <span class="built_in">return</span> -1;</span><br><span class="line"></span><br><span class="line">    Mat frame;</span><br><span class="line">    int i = 0;</span><br><span class="line">    char filename[10];</span><br><span class="line">    <span class="keyword">while</span>(i&lt;5)</span><br><span class="line">    &#123;</span><br><span class="line">        i++;</span><br><span class="line">        cap.read(frame);</span><br><span class="line">        sprintf(filename, <span class="string">&quot;img%d.jpg&quot;</span>, i);</span><br><span class="line">        imwrite(filename, frame);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;frame:%d\n&quot;</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译并上传到/root目录下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mipsel-openwrt-linux-g++ test.cpp -o <span class="built_in">test</span> -lopencv_core -lopencv_highgui</span><br><span class="line">scp <span class="built_in">test</span> root@192.168.8.1:/root</span><br></pre></td></tr></table></figure>
<p>如果你还没有给交叉编译器创建软链接，现在可以创建一个：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /home/ypw/Desktop/wrtnode/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/mipsel-openwrt-linux-g++ /usr/local/bin</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151021_72.png"><img
src="/images/Snip20151021_72.png" /></a></p>
<p>此外，我们还需要在WRTnode上安装OpenCV，不然会提示缺少库，就像这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./test: can&#x27;t load library &#x27;libopencv_highgui.so.2.4&#x27;</span><br></pre></td></tr></table></figure>
<p>所以解决方法是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> Libraries  ---&gt;  opencv</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151021_73.png"><img
src="/images/Snip20151021_73.png" /></a></p>
<p>开启opencv的编译，然后修改Makefile文件，开启highgui。为什么要开启highgui呢？因为要用VideoCapture就必须```
#include &lt;opencv2/highgui/highgui.hpp&gt; <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```sh</span><br><span class="line">/home/ypw/Desktop/wrtnode/feeds/packages/libs/opencv/Makefile</span><br></pre></td></tr></table></figure></p>
<p><strong>-DBUILD_opencv_highgui:BOOL=ON</strong></p>
<p><a href="/images/Snip20151021_77.png"><img
src="/images/Snip20151021_77.png" /></a></p>
<p>然后<code>make -j8</code>，如果以前编译过了OpenCV，最好先``` make
clean <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[![](/images/Snip20151021_78.png)](/images/Snip20151021_78.png)</span><br><span class="line"></span><br><span class="line">刷好新的固件之后，我们就可以在WRTnode上运行这个程序了。当然，刷完系统以后需要重新scp一下。</span><br><span class="line"></span><br><span class="line">```sh</span><br><span class="line">scp test root@192.168.8.1:/root</span><br></pre></td></tr></table></figure></p>
<p>当然，运行test之前，USB电流问题也是需要解决的：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.8.1</span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /sys/bus/usb/devices/1-1.3/bConfigurationValue</span><br><span class="line">./test</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151022_89.png"><img
src="/images/Snip20151022_89.png" /></a></p>
<p>我们可以看到，拍好了五张图片，每张大小在100kb左右。</p>
<p>在Ubuntu中安装opencv的方法是这样的：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libopencv-dev</span><br></pre></td></tr></table></figure>
<p>编译：
安装好之后可以直接用g++编译，在本机运行即可测试是否满足我们的需求。只要不含imshow之类的函数，一般可以直接移植到WRTnode
中运行。一般情况下我们会现在ubuntu里写好程序，再放到WRTnode中。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ test.cpp -o <span class="built_in">test</span> -lopencv_core -lopencv_highgui</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/WRTnode%202R%20%E4%BD%BF%E7%94%A8v4l-utils%E6%9F%A5%E7%9C%8B%E6%91%84%E5%83%8F%E5%A4%B4%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/WRTnode%202R%20%E4%BD%BF%E7%94%A8v4l-utils%E6%9F%A5%E7%9C%8B%E6%91%84%E5%83%8F%E5%A4%B4%E4%BF%A1%E6%81%AF/" class="post-title-link" itemprop="url">WRTnode 2R 使用v4l-utils查看摄像头信息</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-20 21:49:27" itemprop="dateCreated datePublished" datetime="2015-10-20T21:49:27+08:00">2015-10-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>首先安装v4l-utils。 &gt; libv4l is a collection of libraries which
adds a thin abstraction layer on top of video4linux2 devices. The
purpose of this (thin) layer is to make it easy for application writers
to support a wide variety of devices without having to write separate
code for different devices in the same class. libv4l consists of 3
different libraries: libv4lconvert, libv4l1 and libv4l2. libv4l1 offers
the (deprecated) v4l1 API on top of v4l2 devices, independent of the
drivers for those devices supporting v4l1 compatibility (which many v4l2
drivers do not). libv4l2 offers the v4l2 API on top of v4l2 devices,
while adding for the application transparent libv4lconvert conversion
where necessary. This package contains the video4linux utilities.
方法1：</p>
<p><a href="/images/Snip20151020_53.png"><img
src="/images/Snip20151020_53.png" /></a></p>
<p>方法2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install v4l-utils</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151020_55.png"><img
src="/images/Snip20151020_55.png" /></a></p>
<p>安装完成之后，我们插上摄像头，然后强制启用。不明白的话可以看<a href="/WRTnode%202R%20%E4%BD%BF%E7%94%A8USB%E6%91%84%E5%83%8F%E5%A4%B4%E4%BC%A0%E8%BE%93%E8%A7%86%E9%A2%91%E6%B5%81/" title="WRTnode 2R 使用USB摄像头传输视频流">WRTnode 2R 使用USB摄像头传输视频流</a>中对USB设备的解释。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; /sys/bus/usb/devices/1-1.3/bConfigurationValue</span><br></pre></td></tr></table></figure>
<p>启用以后我们来使用v4l-ctl来查看摄像头输出的格式和分辨率。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v4l2-ctl --list-formats</span><br><span class="line">v4l2-ctl --list-formats-ext</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151020_57.png"><img
src="/images/Snip20151020_57.png" /></a></p>
<p>可以看到我这里有两个video设备，一个是MJPG的，一个是YUV的。分辨率也从320*180到1920*1080不等。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/WRTnode%202R%20%E4%BD%BF%E7%94%A8USB%E6%91%84%E5%83%8F%E5%A4%B4%E4%BC%A0%E8%BE%93%E8%A7%86%E9%A2%91%E6%B5%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/WRTnode%202R%20%E4%BD%BF%E7%94%A8USB%E6%91%84%E5%83%8F%E5%A4%B4%E4%BC%A0%E8%BE%93%E8%A7%86%E9%A2%91%E6%B5%81/" class="post-title-link" itemprop="url">WRTnode 2R 使用USB摄像头传输视频流</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-19 22:40:24" itemprop="dateCreated datePublished" datetime="2015-10-19T22:40:24+08:00">2015-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>首先我们需要对固件重新编译，因为没有USB摄像头驱动是无法进行下一步的传输的。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make menuconfig</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Multimedia      ---&gt;   &lt;*&gt; mjpg-streamer</span><br><span class="line"></span><br><span class="line">Kernel modules  ---&gt;   Video Support  ---&gt;        &lt;*&gt; kmod-video-core......</span><br><span class="line">                                                  &lt;*&gt;   kmod-video-uvc....</span><br><span class="line">                                                  -*-   kmod-video-videobuf2</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151019_37.png"><img
src="/images/Snip20151019_37.png" /></a></p>
<p>配置好，Save之后，编译。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j8</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151019_38.png"><img
src="/images/Snip20151019_38.png" /></a></p>
<p>然后把生成的固件刷机。不会的话参照<a href="/WRTnode%202R%20SDK%E6%90%AD%E5%BB%BA%EF%BC%8C%E5%9B%BA%E4%BB%B6%E7%9A%84%E7%BC%96%E8%AF%91/" title="WRTnode 2R SDK搭建，固件的编译">WRTnode 2R SDK搭建，固件的编译</a>后部分。</p>
<p>刷好之后，插上USB摄像头，<code>ls /dev</code>看看是否已连接上。结果并没有连上。</p>
<p><a href="/images/Snip20151019_40.png"><img
src="/images/Snip20151019_40.png" /></a></p>
<p>查看内核日志发现是电流不够</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usb 1-1.3: rejected 1 configuration due to insufficient available bus power</span><br></pre></td></tr></table></figure>
<p>其实内核日志也可以这样查看：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep usb</span><br></pre></td></tr></table></figure>
<p>经过google查到解决方法执行下面的命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; /sys/bus/usb/devices/1-1.3/bConfigurationValue</span><br></pre></td></tr></table></figure>
<blockquote>
<p>bConfigurationValue的意思大概是强制启用该USB设备。
这里的1-1.3改为你的内核日志里的USB端口号，然后再<code>ls /dev</code>发现USB摄像头挂载成功，也就是绿色框内的video设备。</p>
</blockquote>
<p><a href="/images/Snip20151019_43.png"><img
src="/images/Snip20151019_43.png" /></a></p>
<p>再次查看内核日志，已经有摄像头成功加载的信息。</p>
<p><a href="/images/Snip20151019_45.png"><img
src="/images/Snip20151019_45.png" /></a></p>
<p>然后我们就可以使用<code>mjpg_streamer</code> 来推流了。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mjpg_streamer -i <span class="string">&quot;input_uvc.so -f 25 -r 640*480&quot;</span> -o <span class="string">&quot;output_http.so -p 8080&quot;</span></span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151019_46.png"><img
src="/images/Snip20151019_46.png" /></a></p>
<p>不出意外的话，打开这个网址就可以看到摄像头的图像了。<a
target="_blank" rel="noopener" href="http://192.168.8.1:8080/?action=stream">http://192.168.8.1:8080/?action=stream</a></p>
<p><a href="/images/Snip20151019_47.png"><img
src="/images/Snip20151019_47.png" /></a></p>
<p>如果你想每次启动WRTnode
2R之后，都会自动开启摄像头传输视频，可以在<strong>系统</strong>选项卡下的<strong>启动项</strong>设置的<strong>本地启动脚本</strong>中加入上面那些命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo 1 &gt; /sys/bus/usb/devices/1-1.3/bConfigurationValue</span><br><span class="line">mjpg_streamer -i &quot;input_uvc.so -f 25 -r 640*480&quot; -o &quot;output_http.so -p 8080&quot;</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151019_51.png"><img
src="/images/Snip20151019_51.png" /></a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/WRTnode%202R%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%B5%84%E6%96%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/WRTnode%202R%20%E5%9B%BE%E7%89%87%E5%92%8C%E8%B5%84%E6%96%99/" class="post-title-link" itemprop="url">WRTnode 2R 图片和资料</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-16 13:37:41" itemprop="dateCreated datePublished" datetime="2015-10-16T13:37:41+08:00">2015-10-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a href="/images/IMG_0483.jpg"><img
src="/images/IMG_0483.jpg" /></a></p>
<p><a href="/images/IMG_0486.jpg"><img
src="/images/IMG_0486.jpg" /></a></p>
<p><a href="/images/2R-pin-map.jpg"><img
src="/images/2R-pin-map.jpg" /></a></p>
<p><a href="/images/openssl.png"><img
src="/images/openssl.png" /></a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/WRTnode%202R%20%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/WRTnode%202R%20%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91/" class="post-title-link" itemprop="url">WRTnode 2R 交叉编译</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-16 13:11:56" itemprop="dateCreated datePublished" datetime="2015-10-16T13:11:56+08:00">2015-10-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>首先，我们需要完成<a href="/WRTnode%202R%20SDK%E6%90%AD%E5%BB%BA%EF%BC%8C%E5%9B%BA%E4%BB%B6%E7%9A%84%E7%BC%96%E8%AF%91/" title="WRTnode 2R SDK搭建，固件的编译">WRTnode 2R SDK搭建，固件的编译</a>，然后我们可以在wrtnode文件夹下找到mipsel-openwrt-linux-gcc，将其软链接到/usr/local/bin目录下。</p>
<p><a href="/images/Snip20151018_26.png"><img
src="/images/Snip20151018_26.png" /></a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /home/ypw/Desktop/wrtnode/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/mipsel-openwrt-linux-gcc /usr/local/bin/</span><br></pre></td></tr></table></figure>
<p>然后我们新建一个工作目录，创建test.c，然后进行交叉编译。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="built_in">test</span></span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">nano test.c</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;Hell World!\n&quot;);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151016_10.png"><img
src="/images/Snip20151016_10.png" /></a></p>
<p>Ctrl+O，回车，保存文件，然后Ctrl+X退出nano。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mipsel-openwrt-linux-gcc test.c -o test</span><br><span class="line">scp test root@192.168.8.1:/root/</span><br></pre></td></tr></table></figure>
<p>编译完成之后，我们通过scp命令将其拷贝到WRTnode 2R上。</p>
<p><a href="/images/Snip20151016_15.png"><img
src="/images/Snip20151016_15.png" /></a></p>
<p>最后，在2R上运行test。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.8.1</span><br><span class="line">./test</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151016_17.png"><img
src="/images/Snip20151016_17.png" /></a></p>
<p>参考自<a
target="_blank" rel="noopener" href="http://wiki.wrtnode.com/index.php?title=How_to_compile_with_the_openwrt_toolchain/zh-cn"
title="How_to_compile_with_the_openwrt_toolchain/zh-cn">用openwrt编译器交叉编译</a>。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ypw.io/WRTnode%202R%20SDK%E6%90%AD%E5%BB%BA%EF%BC%8C%E5%9B%BA%E4%BB%B6%E7%9A%84%E7%BC%96%E8%AF%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="杨培文">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨培文">
      <meta itemprop="description" content="杨培文的 blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 杨培文">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/WRTnode%202R%20SDK%E6%90%AD%E5%BB%BA%EF%BC%8C%E5%9B%BA%E4%BB%B6%E7%9A%84%E7%BC%96%E8%AF%91/" class="post-title-link" itemprop="url">WRTnode 2R SDK搭建，固件的编译</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-15 21:59:43" itemprop="dateCreated datePublished" datetime="2015-10-15T21:59:43+08:00">2015-10-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-08-06 23:59:15" itemprop="dateModified" datetime="2019-08-06T23:59:15+08:00">2019-08-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>首先当然是安装ubuntu啦，我这里安装的是<strong>ubuntukylin-14.04.2-desktop-amd64.iso。</strong></p>
<p><a href="/images/Snip20151016_3.png"><img
src="/images/Snip20151016_3.png" /></a></p>
<p>然后我们需要下载WRTnode的SDK，来自<a
target="_blank" rel="noopener" href="http://wiki.wrtnode.com/index.php?title=WRTnode2R%E5%86%85%E6%B5%8B%E7%89%88%E5%BC%80%E7%AE%B1%E6%8C%87%E5%8D%97"
title="WRTnode2R%E5%86%85%E6%B5%8B%E7%89%88%E5%BC%80%E7%AE%B1%E6%8C%87%E5%8D%97">WRTnode2R内测版开箱指南</a>，静态OpenWrt
SDK，链接：<a
target="_blank" rel="noopener" href="http://pan.baidu.com/s/1hqya6H2">http://pan.baidu.com/s/1hqya6H2</a>
密码：1kz6。</p>
<blockquote>
<p>注意：如果你需要安装更多功能，比如opencv，python等，那么你可能需要下载许多源码包，有一些会非常费时间，因此我将我这里已经下载好的包上传到了博客，大家可以下载好以后直接放在wrtnode目录下，减少编译所消耗的不必要时间。链接:
<a
target="_blank" rel="noopener" href="http://pan.baidu.com/s/1c06YdH2">http://pan.baidu.com/s/1c06YdH2</a>
密码: dfns
下载好之后，可以直接在ubuntu中打开，然后解压到桌面上。这里需要注意的一点是，如果你的ubuntu选择了中文，桌面文件夹是中文的“桌面”，而不是Desktop，那么你就需要换一个地方放你的SDK，因为<strong>Subversion不支持中文路径</strong>。如果习惯于使用终端操作，可以使用tar解压。</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -jxvf sdk.tar.bz2</span><br><span class="line"><span class="built_in">cd</span> wrtnode</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151016_4.png"><img
src="/images/Snip20151016_4.png" /></a></p>
<p>然后我们可以打开终端，开始配置环境。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y upgrade</span><br><span class="line">sudo apt-get -y install build-essential subversion libncurses5-dev zlib1g-dev gawk gcc-multilib flex git-core gettext libssl-dev</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151016_7.png"><img
src="/images/Snip20151016_7.png" /></a></p>
<p>配置好以后就可以进入wrtnode目录，进行相关配置，然后开始编译。这里需要注意的是，WRTnode
2R的CPU型号是MT7688，因此我们应该在Subtarget (MT7628 based
boards)中选择<strong>MT7628 based
boards</strong>，不然烧进去就会<strong>变砖</strong>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Desktop/wrtnode</span><br><span class="line">make menuconfig</span><br><span class="line">make V=s</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151015_42.png"><img
src="/images/Snip20151015_42.png" /></a></p>
<p>这个过程十分漫长，时间通常在半个小时到两个小时左右，第一次编译完成之后，之后的编译将会十分迅速。如果嫌编译速度慢，可以使用-j参数提高编译速度。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j8</span><br></pre></td></tr></table></figure>
<p><a href="/images/Snip20151015_44.png"><img
src="/images/Snip20151015_44.png" /></a></p>
<p>编译完成以后，固件的路径是wrtnode/bin/ramips/openwrt-ramips-mt7628-wrtnode2r-squashfs-sysupgrade.bin。</p>
<p><a href="/images/Snip20151015_43.png"><img
src="/images/Snip20151015_43.png" /></a></p>
<p>得到bin文件之后，可以进入<a
target="_blank" rel="noopener" href="http://192.168.8.1">http://192.168.8.1</a>开始刷机，选择系统，备份/升级，在刷写新的固件选项卡下选择刚才编译的文件，然后点击刷写固件。这个过程可能有五分钟，可以耐心等待，但是不可以断电。</p>
<p><a href="/images/Snip20151015_47.png"><img
src="/images/Snip20151015_47.png" /></a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">杨培文</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  






  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
